.. _analysis:


*****************************
Shadow coverage
*****************************


Shadow coverage
--------------------------------------

.. function:: pybdshadow.cal_sunshine(buildings, day='2022-01-01', roof=False,grids =  gpd.GeoDataFrame(), accuracy=1, precision=3600, padding=0)

Calculate the sunshine time in given date.

**Parameters**

buildings : GeoDataFrame
    Buildings. coordinate system should be WGS84
day : str
    the day to calculate the sunshine
roof : bool
    whether to calculate roof shadow.
grids : GeoDataFrame
    grids generated by TransBigData in study area
precision : number
    time precision(s)
padding : number
    padding time before and after sunrise and sunset
accuracy : number
    size of grids.
    
**Return**

grids : GeoDataFrame
    grids generated by TransBigData in study area, each grids have a `time` column store the sunshine time


.. function:: pybdshadow.cal_sunshadows(buildings, cityname='somecity', dates=['2022-01-01'], gap=3600,roof=True, include_building=True,save_shadows=False,printlog=False)

Calculate the sunlight shadow in different date with given time gap.

**Parameters**

buildings : GeoDataFrame
    Buildings. coordinate system should be WGS84
cityname : string
    Cityname. If save_shadows, this function will create `result/cityname` folder to save the shadows
dates : list
    list of dates
gap : number
    time gap(s)
roof : bool
    whether to calculate roof shadow.
include_building : bool
    whether the shadow include building outline
save_shadows : bool
    whether to save calculated shadows
printlog : bool
    whether to print log

**Return**

allshadow : GeoDataFrame
    All building shadows calculated


.. function:: pybdshadow.cal_shadowcoverage(shadows_input,buildings,roof=True,gap = 3600,accuracy=1)

Calculate the sunlight shadow coverage time for given area.

**Parameters**

shadows_input : GeoDataFrame
    All building shadows calculated
buildings : GeoDataFrame
    Buildings. coordinate system should be WGS84
roof : bool
    If true roof shadow, false then ground shadow
gap : number
    time gap(s), which is for calculation of coverage time
accuracy : number
    size of grids.

**Return**

bdgrids : GeoDataFrame
    grids generated by TransBigData in study area, each grids have a `time` column store the shadow coverage time



